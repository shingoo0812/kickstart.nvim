# ============================================================================
# Neovim Development Environment - Docker Compose Configuration
# ============================================================================
# Simple configuration for running the pre-built neovim-dev image
# ============================================================================

services:
  neovim:
    image: neovim-dev:latest
    container_name: neovim-dev
    
    # Interactive terminal required for Neovim
    stdin_open: true
    tty: true
    
    # Volume mounts
    volumes:
      # Mount Neovim config (read-only)
      - ~/dotfiles/linux/nvim:/root/.config/nvim:ro     

      # Mount lazy-lock.json separately as read-write
      - ../lazy-lock.json:/root/.config/nvim/lazy-lock.json:rw
      
      # Mount workspace directory
      - ${WORKSPACE_PATH:-${HOME}/projects}:/workspace
      
      # Optional: Mount SSH keys for git operations
      # - ${HOME}/.ssh:/root/.ssh:ro
      
      # Optional: Mount git config
      # - ${HOME}/.gitconfig:/root/.gitconfig:ro
    
    # Working directory inside container
    working_dir: /workspace
    
    # Environment variables
    environment:
      - LANG=en_US.UTF-8
      - LC_ALL=en_US.UTF-8
      - PYTHONIOENCODING=utf-8
      - EDITOR=nvim
      - TERM=xterm-256color
    
    # Security options (required for some debugging tools)
    security_opt:
      - seccomp:unconfined

# ============================================================================
# Usage Examples:
# ============================================================================
# 
# Run Neovim:
#   docker-compose run --rm neovim
# 
# Run Neovim with a specific file:
#   docker-compose run --rm neovim /workspace/myfile.py
# 
# Run bash shell:
#   docker-compose run --rm --entrypoint /bin/bash neovim
# 
# Build from Dockerfile (if not using pre-built image):
#   docker-compose build
# 
# ============================================================================
